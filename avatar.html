<!-- avatar.html  (static) -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Clarity Interview Avatar</title>
<style>
  :root { --bg:#091620; --panel:#0f2333; --ring1:#60a5fa; --ring2:#34d399; --ring3:#f472b6; --text:#e6f0ff; --muted:#a8c0d6; }
  html,body{height:100%} body{margin:0;background:radial-gradient(1200px 800px at 20% -10%, #0c1c2c 0%, var(--bg) 50%),radial-gradient(1000px 600px at 100% 110%, #0c1c2c 0%, transparent 60%);color:var(--text);font:16px/1.4 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;display:grid;place-items:center}
  .wrap{width:min(780px,92vw);background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:28px 24px 30px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .brand{display:flex;align-items:center;gap:12px;margin-bottom:18px;opacity:.9}.brand .dot{width:14px;height:14px;border-radius:6px;background:linear-gradient(135deg,#67e8f9,#60a5fa)} .brand h1{font-size:18px;margin:0}
  .canvas{position:relative;height:280px;display:grid;place-items:center;background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border:1px solid rgba(255,255,255,.06);border-radius:16px;overflow:hidden}
  .rings{position:absolute;inset:0;display:grid;place-items:center;filter:drop-shadow(0 6px 16px rgba(0,0,0,.35))}
  .ring{position:absolute;border-radius:999px;border:2px solid transparent}
  .r1{width:120px;height:120px;box-shadow:0 0 0 3px var(--ring1) inset}
  .r2{width:180px;height:180px;box-shadow:0 0 0 3px var(--ring2) inset;opacity:.85}
  .r3{width:240px;height:240px;box-shadow:0 0 0 3px var(--ring3) inset;opacity:.75}
  .pulse{animation:pulse 2.2s ease-in-out infinite}.pulse2{animation:pulse 2.2s .15s ease-in-out infinite}.pulse3{animation:pulse 2.2s .3s ease-in-out infinite}
  @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
  .core{width:82px;height:82px;border-radius:999px;background:conic-gradient(from 220deg,#8b5cf6,#34d399,#60a5fa,#8b5cf6);box-shadow:0 10px 28px rgba(0,0,0,.35),0 0 0 6px rgba(139,92,246,.22);display:grid;place-items:center;color:#fff;font-weight:700;letter-spacing:.3px}
  .badge{display:inline-block;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:600;letter-spacing:.2px;border:1px solid rgba(255,255,255,.18)}
  .b_listening{background:rgba(52,211,153,.12);color:#34d399;border-color:rgba(52,211,153,.35)}
  .b_thinking{background:rgba(124,58,237,.12);color:#a78bfa;border-color:rgba(124,58,237,.35)}
  .b_speaking{background:rgba(96,165,250,.12);color:#93c5fd;border-color:rgba(96,165,250,.35)}
  .b_idle{background:rgba(255,255,255,.06);color:#e5e7eb;border-color:rgba(255,255,255,.18)}
</style>
</head>
<body>
  <div class="wrap">
    <div class="brand"><div class="dot"></div><h1>Clarity Interview Avatar</h1></div>
    <div class="canvas">
      <div class="rings">
        <div class="ring r3 pulse3" id="r3"></div>
        <div class="ring r2 pulse2" id="r2"></div>
        <div class="ring r1 pulse"  id="r1"></div>
      </div>
      <div class="core">AI</div>
    </div>
    <p style="margin:12px 2px 0;font-size:12px"><span id="state" class="badge b_idle">idle</span></p>
    <p style="margin:6px 2px 0;font-size:12px;color:#a8c0d6">States: <em>listening</em> • <em>speaking</em> • <em>thinking</em></p>
  </div>
<script>
(function(){
  const r1=document.getElementById('r1'), r2=document.getElementById('r2'), r3=document.getElementById('r3'), b=document.getElementById('state');
  function setState(s){ b.textContent=s; b.className='badge b_'+(s||'idle'); const d=(s==='listening')?'1.1s':(s==='speaking'?'1.5s':(s==='thinking'?'2.4s':'2.2s')); [r1,r2,r3].forEach(el=> el.style.animationDuration=d); }
  function setLevel(x){ const c=Math.max(0,Math.min(1,Number(x)||0)); const sc=1+c*0.25; r1.style.transform=`scale(${sc})`; r2.style.transform=`scale(${sc*1.04})`; r3.style.transform=`scale(${sc*1.08})`; }
  window.addEventListener('message',(ev)=>{ const d=ev.data||{}; if(d.type==='avatar:set') setState(d.state||'idle'); if(d.type==='avatar:level') setLevel(d.value); if(d.type==='ping') ev.source?.postMessage?.({type:'avatar:ready'},'*'); });
  setTimeout(()=> parent?.postMessage?.({ type:'avatar:ready' }, '*'), 50);
})();
</script>
</body>
</html>
