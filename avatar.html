<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Clarity Interview Avatar</title>
<style>
  :root{ --bg:#0a1622; --panel:#0f2436; --txt:#e6f0ff; --muted:#9bb3c9; --ok:#22c55e; --warn:#f59e0b; }
  html,body{height:100%}
  body{margin:0;background:
      radial-gradient(900px 500px at 10% -10%,#0d2030,transparent),
      radial-gradient(900px 500px at 120% 120%,#0d2030,transparent),
      var(--bg);
    color:var(--txt);font:15px/1.4 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{max-width:980px;margin:28px auto;padding:0 18px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:18px 18px 22px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .brand{display:flex;align-items:center;gap:12px;margin:0 0 12px}
  .dot{width:18px;height:18px;border-radius:7px;background:linear-gradient(135deg,#67e8f9,#60a5fa)}
  h1{font-size:18px;margin:0}
  .panel{background:#07111a;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:22px;min-height:260px;display:grid;place-items:center}
  .orb{width:220px;height:220px;border-radius:9999px;position:relative;background:radial-gradient(circle at 50% 45%, #7dd3fc, #a78bfa 60%, #38bdf8 100%);box-shadow:0 0 40px rgba(56,189,248,.35) inset, 0 0 80px rgba(167,139,250,.25)}
  .ring{position:absolute;border-radius:9999px;border:2px solid rgba(167,139,250,.55);inset:-18px;animation:r 6s linear infinite}
  .ring:nth-child(2){inset:-36px;border-color:rgba(56,189,248,.45);animation-duration:8s}
  .ring:nth-child(3){inset:-54px;border-color:rgba(125,211,252,.40);animation-duration:10s}
  @keyframes r{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
  .state{margin-top:14px;color:var(--muted);text-align:center}
  .state b{color:#e6f0ff}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="brand"><div class="dot"></div><h1>Clarity Interview Avatar</h1></div>
    <div class="panel">
      <div class="orb"><div class="ring"></div><div class="ring"></div><div class="ring"></div></div>
    </div>
    <div class="state" id="stateTxt">idle — <b>listening</b> • speaking • thinking</div>
  </div>
</div>
<script>
(function(){
  const stateTxt = document.getElementById('stateTxt');
  function set(s){
    stateTxt.innerHTML = (s==='listening' ? 'listening — <b>active</b> • speaking • thinking'
      : s==='speaking' ? 'speaking — <b>active</b> • listening • thinking'
      : s==='thinking' ? 'thinking — <b>active</b> • listening • speaking'
      : 'idle — <b>listening</b> • speaking • thinking');
  }
  window.addEventListener('message', (ev)=>{
    const d = ev?.data||{};
    if (d.type==='avatar:set') set(d.state||'idle');
    if (d.type==='avatar:level') {/* optional: anim intensity */}
  });
  setTimeout(()=> parent?.postMessage?.({ type:'avatar:ready' }, '*'), 40);
})();
</script>
</body>
</html>
